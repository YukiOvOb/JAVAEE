# 用户个人信息页面 - 功能说明

## 📋 功能概述

创建了一个完整的用户个人信息管理页面,用户登录后可以查看和修改个人信息。

## ✨ 主要功能

### 1. **信息展示**
- 👤 用户名 (Name) - 不可修改
- 🏠 地址 (Address) - 可直接修改
- 📧 邮箱 (Email) - 需要验证码验证后修改
- 📱 电话 (Phone) - 可直接修改

### 2. **修改功能**

#### 地址修改
- 点击"Edit"按钮
- 弹出修改窗口
- 输入新地址
- 点击"Save"保存

#### 电话修改
- 点击"Edit"按钮
- 弹出修改窗口
- 输入新电话号码
- 点击"Save"保存

#### 邮箱修改 (两步验证)
- **步骤1**: 输入新邮箱地址,点击"Send Code"
- 系统向新邮箱发送6位验证码
- **步骤2**: 输入收到的验证码
- 点击"Save"完成修改

### 3. **其他功能**
- 🚪 登出按钮 - 清除cookie和localStorage,返回登录页
- 🔒 未登录自动跳转到登录页

## 📁 文件结构

### 前端文件
```
/root/JAVAEE/FrontEnd/my-app/src/pages/
├── UserProfile.jsx      # 用户个人信息页面组件
└── UserProfile.css      # 样式文件
```

### 后端文件
```
/root/JAVAEE/BackEnd/application/src/main/java/com/application/
├── controller/CustomerController.java    # 新增5个API接口
└── service/CustomerService.java          # 新增updateCustomer方法
```

## 🔌 API 接口

### 1. 获取用户信息
```
GET /api/customers/name/{name}
返回: Result<Customer>
```

### 2. 更新地址
```
POST /api/customers/updateaddress
请求体: { name, address }
返回: Result<?>
```

### 3. 更新电话
```
POST /api/customers/updatephone
请求体: { name, phone }
返回: Result<?>
```

### 4. 更新邮箱
```
POST /api/customers/updateemail
请求体: { name, email }
返回: Result<?>
```

### 5. 发送验证码到指定邮箱
```
POST /api/customers/sendemailto
请求体: { email }
返回: 验证码字符串
```

## 🚀 使用流程

### 1. 启动后端
```bash
cd /root/JAVAEE/BackEnd/application
mvn spring-boot:run
```

### 2. 启动前端
```bash
cd /root/JAVAEE/FrontEnd/my-app
npm run dev
```

### 3. 访问页面
1. 打开浏览器访问前端地址
2. 登录账号
3. 自动跳转到 `/profile` 用户个人信息页面
4. 查看和修改个人信息

## 💡 设计特点

### UI/UX
- 🎨 紫色渐变背景,与登录页面风格统一
- 📱 响应式设计,支持移动端
- ✨ 流畅的动画效果(淡入、滑动)
- 🎯 清晰的信息布局(图标 + 标签 + 值 + 按钮)

### 安全性
- 🔒 邮箱修改需要验证码验证
- 🔐 用户名不可修改(主键)
- 👤 未登录自动跳转登录页
- 🍪 Cookie存储用户认证信息

### 交互体验
- ⚡ 实时错误提示
- ✅ 成功消息提示
- ⏳ 加载状态显示
- 🔄 自动关闭弹窗

## 📝 注意事项

### 邮箱验证功能
由于需要配置邮件服务器,请确保:
1. `.env.properties` 中配置了正确的邮箱和密码
2. 使用Gmail需要应用专用密码
3. 验证码会在控制台打印,可用于测试

### Cookie存储
- `username` - 用户名
- `userId` - 用户ID
- 有效期: 7天

### 数据库字段
确保 `customer` 表包含以下字段:
- `name` (主键)
- `address`
- `email`
- `phone`
- `password`

## 🎯 后续优化建议

1. **添加头像上传功能**
2. **添加密码修改功能**(在个人信息页面)
3. **添加操作日志记录**
4. **添加二次确认**(删除账户等敏感操作)
5. **添加表单验证**(电话号码格式、邮箱格式等)
6. **优化邮件模板**(更美观的验证码邮件)

## 🐛 故障排查

### 无法加载用户信息
- 检查后端是否运行
- 检查cookie是否存在
- 查看浏览器控制台错误信息

### 邮箱验证码收不到
- 检查邮件服务器配置
- 查看后端控制台(验证码会打印)
- 确认目标邮箱地址正确

### 修改不成功
- 查看浏览器Network面板
- 检查后端返回的错误信息
- 确认数据库连接正常
